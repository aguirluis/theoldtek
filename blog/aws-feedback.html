<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Building a Serverless Feedback Form | TheOldTek</title>
  <meta name="description" content="How I built a fully serverless feedback form using AWS Lambda, API Gateway, DynamoDB, and GitHub Pages." />
  <link rel="icon" type="image/png" href="../img/favicon.png" />
  <link rel="stylesheet" href="../css/styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>

<body id="top">
  <div class="layout">

    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-upper">
        <div class="sidebar-top">
          <div class="profile-img">
            <img src="../img/avatar.png" alt="Luis E. Aguirre avatar" />
          </div>
          <h1>TheOldTek</h1>
          <p class="tagline">Cloud System Admin • Cybersecurity • Home Lab Architect</p>
        </div>

        <div class="sidebar-middle">
          <nav class="nav-links">
            <ul>
              <li><a href="../index.html"><i class="fas fa-home"></i> Home</a></li>
              <li><a href="../about.html"><i class="fas fa-user"></i> About</a></li>
              <li><a href="../blog.html" class="active"><i class="fas fa-pen"></i> Blog</a></li>
              <li><a href="mailto:aguirluis@gmail.com"><i class="fas fa-envelope"></i> Contact</a></li>
            </ul>
          </nav>
        </div>
      </div>

      <div class="sidebar-bottom">
        <ul class="social-links">
          <li><a href="https://github.com/aguirluis" target="_blank"><i class="fab fa-github"></i></a></li>
          <li><a href="https://linkedin.com/in/luis-aguirre01" target="_blank"><i class="fab fa-linkedin"></i></a></li>
          <li><a href="mailto:aguirluis@gmail.com"><i class="fab fa-google"></i></a></li>
          <li><button id="theme-toggle"><i class="fas fa-moon"></i></button></li>
        </ul>
      </div>
    </aside>

    <!-- Main Content -->
    <div class="main-area">
      <main class="content blog-post">
<article>

  <h1>Building a Serverless Feedback Form with AWS and GitHub Pages</h1>
  <p class="post-date">Published: 2025</p>

  <p>
    I wanted a simple way to collect feedback without running a server, managing a database,
    or worrying about scaling. That led me to a fully serverless stack:
    <strong>AWS Lambda</strong>, <strong>API Gateway</strong>, and <strong>DynamoDB</strong>,
    with a static frontend hosted on <strong>GitHub Pages</strong>.
  </p>

  <h2>Architecture at a Glance</h2>
  <p>The full workflow looks like this:</p>

  <pre><code>
+------------------+        +---------------------+        +----------------------+
|  GitHub Pages    | -----> |   API Gateway       | -----> |     AWS Lambda       |
|  Static HTML/JS  |  POST  |  /feedback endpoint |  JSON  |  Node.js 22.x        |
+------------------+        +---------------------+        +----------+-----------+
                                                                      |
                                                                      v
                                                          +----------------------+
                                                          |   DynamoDB Table     |
                                                          |   FeedbackTable      |
                                                          +----------------------+
  </code></pre>

  <ul>
    <li>User submits a form on a static HTML page.</li>
    <li>Browser sends a <code>POST</code> request to API Gateway.</li>
    <li>API Gateway triggers a Lambda function.</li>
    <li>Lambda writes the feedback into DynamoDB.</li>
    <li>A JSON response is returned to the frontend.</li>
  </ul>

  <h2>Backend: Lambda + DynamoDB</h2>
  <p>
    The Lambda function is written in Node.js 22.x using AWS SDK v3. It validates the input,
    generates a unique <code>feedbackId</code>, and stores the record in DynamoDB.
  </p>

  <h3>Lambda Function Code (Node.js 22.x)</h3>
  <pre><code>
// index.mjs
import { DynamoDBClient, PutItemCommand } from "@aws-sdk/client-dynamodb";

const db = new DynamoDBClient({ region: "us-east-1" });

export const handler = async (event) => {
  const body = JSON.parse(event.body);

  const item = {
    feedbackId: { S: `fb-${Date.now()}` },
    name: { S: body.name },
    email: { S: body.email },
    message: { S: body.message },
    timestamp: { S: new Date().toISOString() }
  };

  await db.send(new PutItemCommand({
    TableName: "FeedbackTable",
    Item: item
  }));

  return {
    statusCode: 200,
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ success: true })
  };
};
  </code></pre>

  <h3>DynamoDB Table Structure</h3>
  <pre><code>
Table Name: FeedbackTable

Partition Key: feedbackId (String)

Attributes:
- name (String)
- email (String)
- message (String)
- timestamp (String)
  </code></pre>

  <h2>API Gateway: Exposing the Lambda as HTTP</h2>
  <p>
    API Gateway exposes the Lambda function through a <code>POST /feedback</code> endpoint.
    I enabled CORS, configured Lambda Proxy Integration, and tested the method until I consistently
    received a <code>200 OK</code> response.
  </p>

  <h2>Frontend: Static HTML on GitHub Pages</h2>
  <p>
    The frontend is intentionally lightweight — a single HTML file with a form and a small
    JavaScript snippet that sends the data to API Gateway.
  </p>

  <h3>Frontend Fetch Code</h3>
  <pre><code>
fetch("https://u83asanvo3.execute-api.us-east-1.amazonaws.com/prod/feedback", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    name: nameInput.value,
    email: emailInput.value,
    message: messageInput.value
  })
})
.then(res => res.json())
.then(() => alert("Feedback submitted!"))
.catch(() => alert("Something went wrong."));
  </code></pre>

  <h2>Why This Approach Works Well</h2>
  <ul>
    <li><strong>No servers to manage:</strong> Lambda and DynamoDB are fully managed.</li>
    <li><strong>Scales automatically:</strong> Handles traffic spikes without configuration.</li>
    <li><strong>Cost-effective:</strong> Stays within the AWS free tier for low traffic.</li>
    <li><strong>Simple frontend:</strong> A single static HTML file powers the entire experience.</li>
  </ul>

  <h2>Lessons Learned</h2>
  <ul>
    <li>API Gateway CORS errors are the #1 issue when connecting static sites to AWS APIs.</li>
    <li>DynamoDB is extremely fast for small payloads — perfect for logging and feedback systems.</li>
    <li>Lambda cold starts are negligible for lightweight Node.js functions.</li>
    <li>Testing API Gateway directly in the console saves a lot of debugging time.</li>
    <li>Serverless apps force you to think in events, not servers — a valuable mindset shift.</li>
  </ul>

  <h2>Future Improvements</h2>
  <ul>
    <li>Add reCAPTCHA or hCaptcha to prevent spam.</li>
    <li>Implement email notifications using SES.</li>
    <li>Add a small admin dashboard to view feedback entries.</li>
    <li>Use API Gateway throttling or AWS WAF for rate limiting.</li>
    <li>Replace REST API with HTTP API for lower cost and simpler routing.</li>
  </ul>

  <h2>Cost Breakdown</h2>
  <p>For small-scale usage, this entire system runs inside the AWS Free Tier:</p>

  <ul>
    <li><strong>Lambda:</strong> First 1M requests/month are free.</li>
    <li><strong>API Gateway:</strong> First 1M REST API calls/month are free.</li>
    <li><strong>DynamoDB:</strong> Free tier includes 25GB storage + 25 RCU/WCU.</li>
    <li><strong>GitHub Pages:</strong> Free static hosting.</li>
  </ul>

  <p>
    Even outside the free tier, this architecture costs only a few cents per month unless you're
    handling thousands of submissions daily.
  </p>

  <p><a href="../blog.html">← Back to Blog</a></p>

</article>

      </main>

      <footer>
        <p>© 2025 TheOldTek | Built with GitHub Pages</p>
      </footer>
    </div>
  </div>

  <script src="../js/theme.js"></script>
</body>
</html>
